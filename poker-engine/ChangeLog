Thu Jun 22 2006  Loic Dachary  <loic@dachary.org>

	* Release 1.0.16

	* Makefile.am (pkgconfigdir): in /usr/share instead of /usr/lib because
	  the package is no-arch

Mon Jun 12 2006  Loic Dachary  <loic@dachary.org>

	* pokerengine/pokergame.py (PokerGame.endState): set current_round to -2
	  Most of the time this is done by muckState. But when in heads up with one
	  player having less money than the blind in a tournament, state transition
	  goes directly from blindState to endState. 

Tue May 23 2006  Loic Dachary  <loic@dachary.org>

	* tests/test-*.py.in: reach 100% coverage

	* pokerengine/pokertournament.py (PokerTournament.endTurn): factorize redundant code

	* pokerengine/poker{game,cards,chips}.py: #pragma no cover for a few lines that can't be tested

Sun May 14 2006  Loic Dachary  <loic@dachary.org>

	* Release 1.0.15

	* tests/test-*.py.in: many more unit tests
	
	* pokerengine/pokercards.py (PokerCards.setVisible): don't alter NOCARD

	* pokerengine/pokercards.py (PokerCards.hasCard): fix to work with no cards
	  also

Fri May 12 2006  Loic Dachary  <loic@dachary.org>

	* pokerengine/pokergame.py (PokerGame.playersInPotCount): last_round was always
	  'total' because this index was added after playersInPotCount implementation.

Thu May 11 2006  Loic Dachary  <loic@dachary.org>

	* pokerengine/pokergame.py (PokerGame.historyReduce): index for sitOut & wait_blind
	  is incorrect

Sat May 06 2006  Loic Dachary  <loic@dachary.org>

	* test/test-*.py.in: more coverage tests (95%)

Wed May 03 2006  Loic Dachary  <loic@dachary.org>

	* pokerengine/pokergame.py (PokerGame.setSeats): player seat set to -1 if an
	  error occurs
	  (PokerGame.cancelState): use GAME_STATE_END macro
	  (PokerGame.waitBigBlind): return if no blind data
	  (PokerGame.blind): return if no blind data
	  (PokerGame.ante): return if no blind data
	  (PokerGame.ante): set amount if amount from info is undefined
	  (PokerGame.disconnectedCount): wrong method name fixed

	* pokerengine/pokergame.py (__historyResolve2messages): kill the unused card2string
	  method.

Tue May 02 2006  Loic Dachary  <loic@gnu.org>

	* conf/*.template: add bet/type

Wed Apr 26 2006  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokerchips.py (PokerChips.convert): if converting from an int and
	  there is a remainder, don't lose it

	* pokerengine/pokergame.py (PokerGame.money2bet): remove redundant test

Mon Apr 24 2006  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokergame.py (PokerGame.readableHandValueLong): royal flush tests fix

	* pokerengine/pokergame.py (PokerGame.possibleActions): return [] instead
	  of False

	* pokerengine/pokertournament.py (PokerTournament.__init__): init bug fixes

	* pokerengine/pokertournament.py (PokerTournament.createGames): ok if the
	  tournament players don't divide into an exact number of tables

	* pokerengine/pokerchips.py (PokerChips.tolist): impossible case raises warning

	* give up python2.2 support

Wed Apr 19 2006  Loic Dachary  <loic@gnu.org>

	* Release 1.0.14

	* pokerengine/pokerchips.py (PokerChips.__ne__): use isinstance

	* tests/run.in: tests run individually by make check instead of grouped
	  into a single execution (exhibits errors)

Mon Apr 17 2006  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokercards.py (letter2names): try & deuce (Christopher Stone <chris.stone@gmail.com>)

Sat Apr 08 2006  Loic Dachary  <loic@gnu.org>

	* tests/coverage.py: add coverage code
	  from http://nedbatchelder.com/code/modules/coverage.html

	* tests/tests-*.py.in: 35% unit test coverage

	* tests/conf/unittest*.xml, upgrade/*.xsl: helpers for unit tests

	* tests/run.in: run all tests and measure coverage (including non-regression tests).

Fri Apr 07 2006  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokergame.py (PokerGame.setDealer): don't modify position
	  if an error occured.
	  (PokerGame.noAutoPlayer): auto = False (instead of True !)

	* pokerengine/pokergame.py (PokerGame.addPlayer): add loads of
	  sanity checks and error reports

	* pokerengine/pokergame.py (PokerGame.setPosition): don't modify position
	  if an error occured.

	* pokerengine/pokergame.py (PokerGame.resetSeatsLeft): If the
	  number of player is invalid the seats_left is reset.

	* pokerengine/pokergame.py (PokerGame.setMaxPlayers): The number
	  max of player is now check and if it is invalid the error is
	  traced and the number is set to 0.

	* pokerengine/pokergame.py (PokerPlayer.__str__):  missing muck

Wed Apr 05 2006  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokergame.py (PokerGame.setVariant): copy the info dict in backup instead
	  of keeping a reference

	* pokerengine/pokergame.py (PokerGame.setVariant): use .path not .url

Sat Apr 01 2006  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokerengineconfig.py (Config.save): don't print none self.path

	* pokerengine/pokerengineconfig.py (Config.checkVersion): test upgrades_repository

	* pokerengine/pokercards.py (PokerCards.__eq__): test argument type

Thu Mar 30 2006  Loic Dachary  <loic@gnu.org>

	* tests/test-version.py.in: unit test for pokerengine/version.py

	* tests/history.py.in (TestHistory.test1): fix history test

Wed Mar 22 2006  Loic Dachary  <loic@gnu.org>

	* Release 1.0.13

	* Makefile.am (buildconf): fix bugous limit structure

Sun Mar 12 2006  Loic Dachary  <loic@gnu.org>

	* Release 1.0.12

	* configure.ac: accept python2.2, abort if rsync missing

	* pokerconfigupgrade.in: use string.find for python2.2 compatibility

	* pokerengine/poker{chips,game,tournament}.py, tests/chips.py.in: define
	  sum function for python2.2

	* pokerengine/pokergame.py: define uniq function and otherwise avoid
	  usage of fromkeys dictionary method

	* pokerengine/pokergame.py(serialsAllSorted): sort keys to avoid 
	  hash key algorithm dependency (may ruin non regression tests)

	* tests/deal.py.in: do not rely on assertEqual with single argument (does
	  not work in python2.2)

	* tests/tournament.py.in: fix equalizeGames output results to take advantage
	  of sorted results.

Mon Feb 27 2006  proppy  <johan@mekensleep.com>

	* pokerengine/pokergame.py (PokerGameClient): removed skin_level

Fri Feb 10 2006  Loic Dachary  <loic@gnu.org>

	* pokerengine/version.py (Version.__{sub,add}__): arithmetic on versions

Wed Jan 20 2006  Benoit Treins

        * conf/*: removed showdown round from variants
        * pokerengine/tests/muck.py.in: created
        * pokerengine/pokergame.py: added muck logic

Wed Jan 19 2006  Benoit Treins

        * pokerengine/pokergame.py: changed first test in call check fold raise functions (may raise error message)

Tue Jan 03 2006  Loic Dachary  <loic@gnu.org>

	* tests/upgrades.py.in: fix PYTHONPATH bug that gave precedence to the
	  installed version instead of the version from the source tree

Mon Jan 02 2006  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokergame.py (PokerGame.setBettingStructure): by default and if
	  negative, round cap is set to maxint
	  (PokerGame.betLimits): if minimum bet is "big" instead of a number, set
	  the minimum bet to the big blind.

Thu Nov 24 2005  Loic Dachary  <loic@gnu.org>

	* Release 1.0.11

	* pokerengine/pokertournament.py (PokerTournament.__init__): default is fixed
	  payout tables

	* conf/poker.payouts.xml: fixed payout tables

	* tests/tournament.py.in (TestPrizes.test1): test fixed payout structure

Wed Nov 23 2005  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokertournament.py (PokerTournament.endTurn): attempt to balance
	  tables when a player is eliminated OR a table does not have enough players

	* pokerengine/pokertournament.py (PokerTournament.balanceGames): remember that
	  a need to move players was not satisfied

	* pokerengine/pokertournament.py (equalizeCompute): separate function for
	  computing games in need of equalization

Tue Nov 22 2005  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokergame.py (PokerGame.setBettingStructure): set best_buy_in and
	  default values for buy-in and max-buy-in

Wed Oct 26 2005  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokergame.py (__historyResolve2messages,
	  history2messages): convert cents amounts for display

Tue Oct 18 2005  Loic Dachary  <loic@gnu.org>

	* Release 1.0.10 
	
	* pokerengine/pokerchips.py: s/tokens/chips/

	* pokerengine/pokerchips.py (PokerChips.int2chips): if the amount is a multiple
	  of a given chip, stick to it

Mon Oct 17 2005  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokertournament.py (PokerTournament.movePlayer): also transfert user data.

	* pokerengine/pokerchips.py (PokerChips.tostring): convert to 
	  string representing the decimal amount
	  (PokerChips.tofloat): convert to the float representing the 
	  decimal amount instead of the cents amount

	* pokerengine/pokerchips.py: the remainder field contains the rest
	  of the chip stack. If the chips values do not include a chip of
	  value 1, the amount that is lower than the smallest chip is stored
	  in the remainder field.

	* pokerengine/pokerchips.py (PokerChips.tolist): convert to standalone
	  list

	* conf/poker.*.xml: all amounts expressed in cents or 1/100

	* pokerengine/pokergame.py (PokerGame.__init__): self.unit : smallest chip
	  value fitting with the betting structure
	  pokerengine/pokergame.py (PokerGame.getChipUnit): 

	* Makefile.am (all-local): run upgrades if conf directory is writeable (that
	  is, not when doing a distcheck)

	* pokerengine/pokergame.py (PokerGame.moneyMap): convenience function
	  replacing chipsMap

	* pokerengine/pokergame.py: amounts are no longer stored in chips but
	  in cents

Fri Oct 14 2005  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokergame.py (PokerPlayer.getUserData): user_data field
	  defined for the caller to store per-player data

Thu Oct 13 2005  Loic Dachary  <loic@gnu.org>

	* pokerconfigupgrade.in: do not prepend path components that are already present
	  in sys.path. Prevents giving priority to standard path over PYTHONPATH.

Fri Sep 30 2005  Loic Dachary  <loic@gnu.org>

	* Release 1.0.9

	* pokerengine/pokergame.py (PokerGame.buildPlayerList): exclude players with
	  wait_for = "first_round". This is only meaningful when set before starting
	  the game and allows the caller to exclude players for the next game while
	  allowing it to join the game after the next game.

	* pokerengine/pokergame.py (PokerGame.playersBeginTurn): do not reset wait_for if
	  "first_round". It may be used to exclude players from the blind/ante round and
	  will be reset to False when the blind/ante round is over.

	* pokerengine/pokergame.py (PokerGame.initRound): s/sitPlayersWait/acceptPlayersWait/

Thu Sep 29 2005  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokergame.py (PokerGame.updateBlinds): change wait_for
	  "late" to False when forbiding missed blind.

	* tests/blinds.py.in (TestBlinds.test0): Two players came in and
	 are waiting for the late blind because they attempted to enter
	 either on the small blind or the dealer position.  Fake this
	 situation instead of playing hands that will lead to the same
	 because it introduces an complexity that is not necessary. This
	 case can happen indeed although very rarely.

	* pokerengine/pokergame.py (PokerPlayer.isMissedBlind): return false
	  if "n/a"

	* poker-engine/conf/*no-limit*: minimum bet does not vary

Sat Sep 24 2005  Loic Dachary  <loic@gnu.org>

	* Release 1.0.8

	* pokerconfigupgrade.in: add python installation directory in python path

Wed Sep 21 2005  Loic Dachary  <loic@gnu.org>

	* bootstrap: do not run autoheader

	* pokerclient2d/*.c: add getopt

Fri Aug 26 2005  Loic Dachary  <loic@gnu.org>

	* Release 1.0.7

	* pokerengine/pokerengineconfig.py (Config.upgrade): ignore
	  missing upgrade repository, as if it was empty, instead of crashing.

Tue Aug 16 2005  Loic Dachary  <loic@gnu.org>

	* Release 1.0.6

	* debian/python2.3-poker-engine.postinst: run pokerconfigupgrade after
	  installation.

	* pokerconfigupgrade.8.in: new

	* pokerconfigupgrade.in: command line utility to upgrade configuration
	  files

Mon Aug 15 2005  Loic Dachary  <loic@gnu.org>

	* upgrades: repository of XSL sheets upgrading confgiruation files

	* tests/upgrades.py.in: apply all upgrades from the 1.0.5 files stored
	  in tests/conf

	* tests/conf: 1.0.5 configuration files from which upgrades can be
	  applied.
	
	* pokerengine/pokerengineconfig.py (Config.upgrade): XSL based upgrade system
	  starting from version 1.0.5 and up.

	* pokerengine/version.py.in: version class for comparison and
	  upgrade matrix helper

	* tests/*.py -> test/*.py.in: allow builds/tests in directory separated
	  from tests.
	
Wed Aug 03 2005  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokergame.py (PokerGame.is{Ante,Blind}Requested): predicate
	  on the blind / ante status of a given player

Wed Aug 03 2005  Loic Dachary  <loic@gnu.org>

	* Release 1.0.5

	* pokerengine/pokergame.py (PokerGame.getLatestPotContributions): helper
	  function added.

	* pokerengine/pokergame.py (PokerGame.updatePots): compute total pot
	  contributions.

	* pokerengine/pokergame.py (PokerGame.distributeMoney): compute total serial2share that
	  replaces winner2share and serial2delta for each player (net win/loss).

Sat Jul 16 2005  Loic Dachary  <loic@gnu.org>

	* debian/control (Section): s/libs/python/ in sections.

Wed Jul 13 2005  Loic Dachary  <loic@gnu.org>

	* Release 1.0.4

	* pokerengine/pokergame.py (PokerGame.sitOut): do not set the dealer
	  seat if less than two players sit.

	* pokerengine/pokergame.py (PokerGame.sit): set first_turn to True if
	  less than two players. 

Tue Jul 05 2005  Loic Dachary  <loic@gnu.org>

	* Release 1.0.3
	
	* tests/sit.py: sitin/sitout tests

	* pokerengine/pokergame.py (PokerGame.sitPlayersWaitingForFirstRound): 
	  if a player sits while others are paying the blinds, he must not
	  be included in the player list.

Tue Jun 28 2005  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokergame.py (PokerGame.isGameEndInformationValid): can the
	  showdown of the previous game be displayed

Fri Jun 24 2005  Loic Dachary  <loic@gnu.org>

	* Release 1.0.2
	
	* pokerengine/pokergame.py (PokerGame.callNraise): split
	  self.bet call to avoid autoplayer infinite recursion

Fri Jun 24 2005  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokergame.py (PokerGame.sitOutNextTurn): sit_request and
	  for client usage, allow client to update sit_out_next_hand in advance.

Wed Jun 15 2005  Loic Dachary  <loic@gnu.org>

	* Release 1.0.1

Thu May 05 2005  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokertournament.py: tournament logic imported
	  from former tournament client

	* tests/tournament.py: new tournament logic non regression tests
	
	* tests/blinds.py: new blind logic non regression tests

Wed May 04 2005  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokergame.py (PokerGame.payBuyIn): do not set the
	  buy in flag if the amount is less than the minimum. This check
	  should also be done by the application and is added as a
	  safeguard.

	* pokerengine/pokergame.py (PokerGame.sitOut): reset dealer sit
	  if only one player in game.

	* pokerengine/pokergame.py (PokerGame.sit): refuse to sit if
	  buy in is not yet payed.

Tue May 03 2005  Loic Dachary  <loic@gnu.org>

	* pokerengine/pokergame.py (PokerGame.isBroke): return False if
	  the serial does not exist. The rationale being that a player not
	  participating in the game cannot be broke. Allows for simpler
	  tests from the application, avoiding a check to make sure the
	  player is indeed seated at the table.

Thu Apr 28 2005  Loic Dachary  <loic@gnu.org>

	* Release 1.0.0

