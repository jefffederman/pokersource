LIB = ../lib/libpoker.a

CFLAGS = @CFLAGS@
CC = @CC@

all: tests

tests: digtest5 digtest7

digtest5 : digtest5.o
	$(CC) $(CFLAGS) -o $@ $< $(LIB)

digtest7 : digtest7.o
	$(CC) $(CFLAGS) -o $@ $< $(LIB)

clean:
	rm -f *.o core digtest5 digtest7

.c.o:
	$(CC) $(CFLAGS) -I../include -c $<

test : tests
	@echo -n "digtest5: 5-card hands..."
	@if [ `./digtest5` = "1f066feff1a8b3406fe069c05c4ba17d" ]; \
		then echo "		Passed"; \
		else echo "		Failed"; \
	fi
	@echo -n "digtest7: 7-card hands..."
	@if [ `./digtest7` = "03a86bd2deac3052bbe93256e0d7b156" ]; \
		then echo "		Passed"; \
		else echo "		Failed"; \
	fi
