#
# Copyright (C) 2005 Mekensleep
#
# Mekensleep
# 24 rue vieille du temple
# 75004 Paris
#       licensing@mekensleep.com
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301, USA.
#
# Authors:
#  Loic Dachary <loic@gnu.org>
#
echo "Preparing the pokernetworktest database, enter the root user password."
( 

cat <<EOF

USE mysql;

DELETE FROM user WHERE User = 'pokernetworktest' AND Host = 'localhost';

DELETE FROM db WHERE User = 'pokernetworktest' AND Host = 'localhost';

DELETE FROM tables_priv WHERE User = 'pokernetworktest' AND Host = 'localhost';

DELETE FROM columns_priv WHERE User = 'pokernetworktest' AND Host = 'localhost';

GRANT SELECT , INSERT , UPDATE , DELETE , CREATE , DROP , FILE , INDEX , ALTER , CREATE TEMPORARY TABLES ON * . * TO 'pokernetworktest'@'localhost'
IDENTIFIED BY 'pokernetwork'
WITH MAX_QUERIES_PER_HOUR 0 MAX_CONNECTIONS_PER_HOUR 0 MAX_UPDATES_PER_HOUR 0 ;

DROP DATABASE IF EXISTS pokernetworktest;
CREATE DATABASE pokernetworktest;
USE pokernetworktest;
EOF

cat $SCHEMA

echo "$INIT_SQL"

) | mysql -u root -p 

