<?xml version="1.0" encoding="utf-8"?>
<!--
////////////////////////////////////////////////////////////////////////////////
//
//     Copyright (C) 2008 Bruno Garnier <bruno.garnier@gmail.com>
//
//     This program is free software: you can redistribute it and/or modify
//     it under the terms of the GNU General Public License as published by
//     the Free Software Foundation, either version 3 of the License, or
//     (at your option) any later version.
//
//     This program is distributed in the hope that it will be useful,
//     but WITHOUT ANY WARRANTY; without even the implied warranty of
//     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//     GNU General Public License for more details.
//
//     You should have received a copy of the GNU General Public License
//     along with this program.  If not, see <http://www.gnu.org/licenses/>.
//
////////////////////////////////////////////////////////////////////////////////
-->

<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" 
	width="120" height="120" 
	borderColor="blue"
	borderStyle="solid"
	borderThickness="2"
	cornerRadius="15"
	
	creationComplete="_init();">

	<mx:Script>
	  <![CDATA[
	  	import aspoker.com.bubsy.poker.client.model.Table;
 		import aspoker.com.bubsy.poker.client.PokerClient;
 		import aspoker.com.bubsy.poker.client.model.User;
 		import aspoker.com.bubsy.poker.client.event.TableEvent;
 		import mx.core.Application;
 	
 		private var _gameId:int=0;
 		private var _seatId:int=0;
		private var _table:Table;
		
		public function set table(table:Table):void
 		{
 			_table=table;
		}
		
 		public function set gameId(gameId:int):void
 		{
 			_gameId= gameId;
		}
 		
 		public function set seatId(seatId:int):void
 		{
 			_seatId = seatId;
 		}
 		
 		public function get seatId():int
 		{
 			return _seatId;
 		}
 		
 			
 		private function _init():void
 		{
 			this.currentState = "free";
 			seatname.text = "seat: " + _seatId;
 		}
		
	private function setPlayerName():String
 	{
 		return "player: " + _table.getPlayerFromSeat(_seatId).name;
 	}
 			
 	 ]]>
 	</mx:Script>
 	<mx:states>
 		 <mx:State name="free" basedOn="">
 		 	<mx:AddChild >
	 			<mx:VBox id="seats">
		 			<mx:Label id="seatname" 
		 				text="" />
	  				<mx:Text
	  					id="seatbutton" 
	  					textAlign="center"
	  					text="Click here to get a seat"
	  					selectable="false"
	  					width="100"
	  					fontWeight="bold" 
	  					click="_table.seat(_seatId);" /> 		
	 			</mx:VBox> 	
 			</mx:AddChild>
	 	</mx:State>
	 	
		<mx:State name="used" basedOn="free">
			<mx:RemoveChild target="{seatbutton}"  />
		 	<mx:AddChild relativeTo="{seats}" >
		 		<mx:Label name="playerName" text="{setPlayerName()}" />
 		  	</mx:AddChild>			

	 	</mx:State>
	 	
		<mx:State name="disabled" basedOn="free">
			<mx:RemoveChild target="{seatbutton}"  />
		 	<mx:AddChild relativeTo="{seats}" >
 		  	</mx:AddChild>
	 	</mx:State>
	</mx:states>

    	
</mx:Canvas>
